# Тестовое задание с hh.ru от drWeb

На соискание должности по вакансии _Web-разработчик (Python)_ ([см. тут](https://hh.ru/vacancy/45814971)) 

## Исходное задание

# Задание для кандидата:

Сделать маленький вариант базы данных. Сетевого взаимодействия не
нужно. Данные запрашиваются у пользователя в диалоговом режиме (ввод с
клавиатуры). База лежит в оперативной памяти.  Одна строка, всегда
ровно один запрос. Аргументы команд пробелов не содержат. Также в
вводе должен рапознаваться EOF, который означает конец ввода и
завершение приложения. Приложение должно быть совместимо с Python 2.7.

Команды:
* **SET** — сохраняет аргумент в базе данных.
* **GET** — возвращает, ранее сохраненную переменную. Если такой переменной не было сохранено, возвращает NULL.
* **UNSET** — удаляет, ранее установленную переменную. Если значение не было установлено, не делает ничего.
* **COUNTS** — показывает сколько раз данные значение встречается в базе данных.
* **FIND** — выводит найденные установленные переменные для данного значения.
* **END** — закрывает приложение.

Пример:
```text
GET A
             NULL
SET A 10
GET A
10
COUNTS 10
1
SET B 20

SET C 10

COUNTS 10
2
UNSET B

GET B
NULL
END
```

Также база должна поддерживать транзакции. Транзакции могут быть
вложенными.

* **BEGIN** — начало транзакции.
* **ROLLBACK** — откат текущей (самой внутренней) транзакции
* **COMMIT** — фиксация изменений текущей (самой внутренней) транзакции

Пример:
```text
BEGIN

SET A 10
BEGIN
SET A 20
BEGIN
SET A 30
GET A
30
ROLLBACK
GET A
20
COMMIT

GET A
20
```

Следует считать, что транзакции используются часто, и поэтому информация и обработка транзакции должна занимать, по 
возможности, меньше ресурсов.

## Примечание к решению

1. Для удобства команды сделаны регистронезависимыми (SET == set). 


2. Для удобства, после завершающей команды **END** сохраняется дамп состояния БД (по умолчанию в файл 
   "_tdb_dump_default.data_"). При старте, в качестве аргумента можно задать имя дамп-файла (в этом случае 
   завершающий дамп тоже будет сохранен в этом файле). Все незавершенные транзакции при сохранении дампа будут утеряны.


3. Понимание команд не зависит от лидирующих пробелов, числа пробелов между командой и аргументами и т.п. Из-за 
   этого аргумент _value_ в команде `SET key value` не может содержать пробелы (будет отсечено по первому пробелу).


4. Если в команде `SET key value` не указан value, то значение ключа считается "пустой строкой" ("").


5. Требование _"обработка транзакции должна занимать, по возможности, меньше ресурсов"_ -- противоречиво. Транзакции 
   будет занимать или много памяти (из-за рекурсивной вложенности данных при транзакции) но при этом  работатьбыстро,
   или экономны на памяти, но ресурсоёмки по процессору при выполнении команд **GET**, **COUNTS**, **FIND** и, 
   отчасти, для **UNSET** и **COMMIT**. (из-за необходимости обхода деревьев вложенности и рексивной проверки на 
   обновление данных). Т.к. данное тестовое задание работает на одном узле в один процесс, то время процессора более 
   "дорого" и выбран подход по его экономии (память расширять проще, дешевле и практические не имеется ограничений 
   по его предельному значению, в отличие от вычислительных мощностей единичного ядра процессора).

## P.S.

По решению задачи не было получено никакой обратной связи. Удалось продтвердить только, что drWeb получил 
выполненное задание. Проверяли ли его ответетсвенные за найм лица узнать не удалось.

_Отсутствие обоснований отказа трудоустройства противоречит законодательству. Безосновательный отказ в приеме на 
работу грозит компании наложением штрафов (ст. 64 ТК РФ, ст. 5.27 КоАП РФ, ст. 145 УК РФ)._
